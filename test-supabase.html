<!DOCTYPE html>
<html>
<head>
    <title>–¢–µ—Å—Ç Supabase</title>
    <style>
        body { background: #0a0a0f; color: white; font-family: monospace; padding: 20px; }
        .success { color: #2ed573; }
        .error { color: #ff4757; }
        pre { background: #1a1a2e; padding: 10px; border-radius: 5px; }
        button { 
            background: linear-gradient(135deg, #ff4757, #8a6bff);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
    </style>
</head>
<body>
    <h1>üîå –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ Supabase</h1>
    
    <button onclick="runTests()">–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã</button>
    <button onclick="clearLog()">–û—á–∏—Å—Ç–∏—Ç—å</button>
    
    <div id="log"></div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        const logDiv = document.getElementById('log');
        
        function addLog(message, type = 'info') {
            const color = type === 'success' ? '#2ed573' : 
                         type === 'error' ? '#ff4757' : '#4a6fa5';
            logDiv.innerHTML += `<p style="color: ${color}">${message}</p>`;
        }

        async function runTests() {
            logDiv.innerHTML = '';
            
            // –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
            addLog('üîÑ –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ Supabase –±–∏–±–ª–∏–æ—Ç–µ–∫–∏...');
            if (typeof window.supabase !== 'undefined') {
                addLog('‚úÖ Supabase –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞', 'success');
            } else {
                addLog('‚ùå Supabase –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ù–ï –∑–∞–≥—Ä—É–∂–µ–Ω–∞', 'error');
                return;
            }

            // –¢–µ—Å—Ç 2: –í—Å—Ç–∞–≤—å—Ç–µ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ
            const SUPABASE_URL = 'https://–≤–∞—à-–ø—Ä–æ–µ–∫—Ç.supabase.co'; // ‚Üê –í–°–¢–ê–í–¨–¢–ï
            const SUPABASE_ANON_KEY = '–≤–∞—à-anon-–∫–ª—é—á'; // ‚Üê –í–°–¢–ê–í–¨–¢–ï
            
            addLog(`üîÑ URL: ${SUPABASE_URL}`);
            addLog(`üîÑ Key: ${SUPABASE_ANON_KEY.substring(0, 20)}...`);

            // –¢–µ—Å—Ç 3: –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞
            try {
                const supabaseClient = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
                addLog('‚úÖ –ö–ª–∏–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω', 'success');
                
                // –¢–µ—Å—Ç 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
                addLog('üîÑ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Ç–∞–±–ª–∏—Ü–µ demons...');
                const { data, error } = await supabaseClient
                    .from('demons')
                    .select('count', { count: 'exact', head: true });
                
                if (error) {
                    addLog(`‚ùå –û—à–∏–±–∫–∞: ${error.message}`, 'error');
                    addLog(`<pre>${JSON.stringify(error, null, 2)}</pre>`);
                } else {
                    addLog('‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ!', 'success');
                    
                    // –¢–µ—Å—Ç 5: –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
                    const { data: demons, error: demonsError } = await supabaseClient
                        .from('demons')
                        .select('*')
                        .limit(3);
                    
                    if (!demonsError && demons) {
                        addLog(`‚úÖ –ù–∞–π–¥–µ–Ω–æ –¥–µ–º–æ–Ω–æ–≤: ${demons.length}`, 'success');
                        addLog('<pre>' + JSON.stringify(demons, null, 2) + '</pre>');
                    }
                }
                
            } catch (err) {
                addLog(`‚ùå –û—à–∏–±–∫–∞: ${err.message}`, 'error');
            }
        }

        function clearLog() {
            logDiv.innerHTML = '';
        }
    </script>
</body>
</html>
